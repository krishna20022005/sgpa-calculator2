<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEU SGPA Calculator</title>
    <style>
        :root {
            --dark-bg: #1a1a1a;
            --primary-orange: #ff8c00;
            --light-text: #f0f0f0;
            --card-bg: #2c2c2c;
            --border-color: #444;
            --input-bg: #3a3a3a;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--dark-bg);
            color: var(--light-text);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .calculator-container {
            width: 100%;
            max-width: 900px;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }

        header h1 {
            color: var(--primary-orange);
            text-align: center;
            margin-top: 0;
            margin-bottom: 5px;
            font-size: 2rem;
            /* Hindi font support */
            font-family: 'Noto Sans Devanagari', Arial, sans-serif;
        }

        header h2 {
            text-align: center;
            color: var(--light-text);
            margin-top: 0;
            margin-bottom: 30px;
            font-weight: normal;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
        }

        select {
            width: 100%;
            padding: 12px;
            background-color: var(--input-bg);
            color: var(--light-text);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1rem;
        }

        .subject-table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: #333;
            color: var(--primary-orange);
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        
        td {
           vertical-align: middle;
        }

        .subject-name {
            font-weight: bold;
            font-size: 0.95rem;
        }
        .subject-code {
            font-size: 0.8rem;
            color: #ccc;
        }

        input[type="number"] {
            width: 60px;
            padding: 8px;
            background-color: var(--input-bg);
            color: var(--light-text);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-align: center;
        }
        
        /* Hide number input spinners */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
        input[type=number] {
          -moz-appearance: textfield;
        }

        .calc-button {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-orange);
            color: var(--dark-bg);
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            transition: background-color 0.3s ease;
        }

        .calc-button:hover {
            background-color: #ffac4d;
        }

        .result-container {
            margin-top: 30px;
            background-color: var(--input-bg);
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            border-left: 5px solid var(--primary-orange);
        }
        
        .result-container h3 {
            margin: 0 0 10px 0;
            color: var(--primary-orange);
        }

        .result-container p {
            margin: 5px 0;
            font-size: 1.2rem;
        }

        .result-sgpa {
            font-weight: bold;
            font-size: 2rem !important;
            color: #fff;
        }
        
        .hidden {
            display: none;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="calculator-container">
        <header>
            <h1>बिहार अभियंत्रण विश्वविद्यालय, पटना</h1>
            <h2>SGPA Calculator</h2>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="branch-select">Select Branch</label>
                <select id="branch-select">
                    <option value="">-- Select Branch --</option>
                </select>
            </div>
            <div class="control-group">
                <label for="semester-select">Select Semester</label>
                <select id="semester-select" disabled>
                    <option value="">-- Select Semester --</option>
                </select>
            </div>
        </div>
        
        <div class="subject-table-container">
            <table id="subject-table">
                </table>
        </div>

        <button id="calculate-btn" class="calc-button hidden">Calculate SGPA</button>

        <div id="result-container" class="result-container hidden">
            <h3>Your Result</h3>
            <p id="result-text"></p>
        </div>
    </div>

    <script>
        const universityData = {
            "Mechanical": {
                "1": [
                    { code: "100101", name: "Engineering Chemistry", credit: 3, type: "Theory" },
                    { code: "100102", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100103", name: "Communicative English", credit: 3, type: "Theory" },
                    { code: "100104", name: "Engineering Graphics and Design", credit: 1, type: "Theory" },
                    { code: "100106", name: "Basic Electrical Engineering", credit: 3, type: "Theory" },
                    { code: "100109P", name: "Sports/Yoga/NCC/NSS", credit: 1, type: "Practical" },
                    { code: "100101P", name: "Engineering Chemistry Lab", credit: 1, type: "Practical" },
                    { code: "100103P", name: "Communicative English Lab", credit: 1, type: "Practical" },
                    { code: "100104P", name: "Engineering Graphics and Design Lab", credit: 2, type: "Practical" },
                    { code: "100106P", name: "Basic Electrical Engineering Lab", credit: 1, type: "Practical" }
                ],
                "2": [
                    { code: "100201", name: "Engineering Physics", credit: 3, type: "Theory" },
                    { code: "100202", name: "Engineering Mathematics-II", credit: 4, type: "Theory" },
                    { code: "100203", name: "Programming for Problem Solving", credit: 3, type: "Theory" },
                    { code: "100214P", name: "Swachha Bharat Mission", credit: 1, type: "Practical" },
                    { code: "100206", name: "Workshop Practices", credit: 2, type: "Theory" },
                    { code: "100204", name: "Elements of Mechanical Engineering", credit: 3, type: "Theory" },
                    { code: "100201P", name: "Engineering Physics Lab", credit: 1, type: "Practical" },
                    { code: "100203P", name: "Programming for Problem Solving Lab", credit: 1, type: "Practical" },
                    { code: "100206P", name: "Workshop Practices Lab", credit: 1, type: "Practical" },
                    { code: "100204P", name: "Elements of Mechanical Engineering Lab", credit: 1, type: "Practical" }
                ],
                "3": [
                    { code: "100301", name: "BIOLOGY FOR ENGINEERS", credit: 3, type: "Theory" },
                    { code: "100303", name: "BASIC ELECTRONICS ENGINEERING", credit: 4, type: "Theory" },
                    { code: "100309", name: "ENGINEERING MECHANICS", credit: 3, type: "Theory" },
                    { code: "100312", name: "MATHEMATICS-III (PDE, PROBABILILTY AND STATISTICS)", credit: 4, type: "Theory" },
                    { code: "102304", name: "THERMODYNAMICS", credit: 4, type: "Theory" },
                    { code: "100309P", name: "ENGINEERING MECHANICS", credit: 1, type: "Practical" },
                    { code: "100399", name: "Internship", credit: 4, type: "Special" },
                    { code: "102302P", name: "Machine Drawing", credit: 2, type: "Practical" }
                ],
                "4": [
                    { code: "102401", name: "Applied Thermodynamics", credit: 4, type: "Theory" },
                    { code: "102402", name: "Engineering Materials", credit: 4, type: "Theory" },
                    { code: "102403", name: "Fluid Mechanics", credit: 3, type: "Theory" },
                    { code: "102404", name: "Instrumentation & Control", credit: 4, type: "Theory" },
                    { code: "102405", name: "Strength of Materials", credit: 3, type: "Theory" },
                    { code: "100408", name: "MOOCs / SWAYAM / NPTEL Courses - 1", credit: 2, type: "Special" },
                    { code: "102403P", name: "Fluid Mechanics LAB", credit: 1.50, type: "Practical" },
                    { code: "102405P", name: "Strength of Materials LAB", credit: 1.50, type: "Practical" }
                ],
                "5": [
                    { code: "102501", name: "Fluid Machinery", credit: 3, type: "Theory" },
                    { code: "102502", name: "Heat Transfer", credit: 3, type: "Theory" },
                    { code: "102503", name: "Kinematics of Machine", credit: 4, type: "Theory" },
                    { code: "102504", name: "Manufacturing Processes", credit: 3, type: "Theory" },
                    { code: "100510", name: "Summer Entrepreneurship – II", credit: 6, type: "Special" },
                    { code: "100511", name: "MOOCs / SWAYAM / NPTEL Courses – 2", credit: 2, type: "Special" },
                    { code: "102501P", name: "Fluid Machinery", credit: 1.50, type: "Practical" },
                    { code: "102502P", name: "Heat Transfer", credit: 1.50, type: "Practical" },
                    { code: "102504P", name: "Manufacturing Processes", credit: 1.50, type: "Practical" }
                ]
            },
            "CSE": {
                "1": [
                    { code: "100110", name: "Engineering Physics", credit: 3, type: "Theory" },
                    { code: "100102", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100111", name: "Programming for Problem Solving", credit: 3, type: "Theory" },
                    { code: "100115P", name: "Swachha Bharat Mission", credit: 1, type: "Practical" },
                    { code: "100113", name: "IT Workshop", credit: 2, type: "Theory" },
                    { code: "100114", name: "Basic Electronics Engineering", credit: 3, type: "Theory" },
                    { code: "100110P", name: "Engineering Physics Lab", credit: 1, type: "Practical" },
                    { code: "100111P", name: "Programming for Problem Solving Lab", credit: 1, type: "Practical" },
                    { code: "100113P", name: "IT Workshop Lab", credit: 1, type: "Practical" },
                    { code: "100114P", name: "Basic Electronics Engineering Lab", credit: 1, type: "Practical" }
                ],
                "2": [
                    { code: "100215", name: "Engineering Chemistry", credit: 3, type: "Theory" },
                    { code: "100202", name: "Engineering Mathematics-II", credit: 4, type: "Theory" },
                    { code: "100216", name: "Communicative English", credit: 3, type: "Theory" },
                    { code: "100220P", name: "Sports/Yoga/NCC/NSS", credit: 1, type: "Practical" },
                    { code: "100218", name: "Python Programming", credit: 2, type: "Theory" },
                    { code: "100219", name: "Introduction to Web Design", credit: 3, type: "Theory" },
                    { code: "100215P", name: "Engineering Chemistry Lab", credit: 1, type: "Practical" },
                    { code: "100216P", name: "Communicative English Lab", credit: 1, type: "Practical" },
                    { code: "100218P", name: "Python Programming Lab", credit: 1, type: "Practical" },
                    { code: "100219P", name: "Introduction to Web Design Lab", credit: 1, type: "Practical" }
                ],
                "3": [
                    { code: "100311", name: "MATHEMATICS-III (DIFFERENTIAL CALCULUS)", credit: 2, type: "Theory" },
                    { code: "100313", name: "OBJECT ORIENTED PROGRAMMING USING C++", credit: 3, type: "Theory" },
                    { code: "100314", name: "TECHNICAL WRITING", credit: 3, type: "Theory" },
                    { code: "100302", name: "ANALOG ELECTRONIC CIRCUITS", credit: 3, type: "Theory" },
                    { code: "100304", name: "DATA STRUCTURE & ALGORITHMS", credit: 3, type: "Theory" },
                    { code: "100313P", name: "OBJECT ORIENTED PROGRAMMING USING C++ LAB", credit: 2, type: "Practical" },
                    { code: "100399", name: "Internship", credit: 4, type: "Special" },
                    { code: "100302P", name: "Analog Electronics Circuits Laboratory LAB", credit: 2, type: "Practical" },
                    { code: "100304P", name: "DATA STRUCTURE & ALGORITHMS LAB", credit: 2, type: "Practical" }
                ],
                "4": [
                    { code: "100403", name: "Digital Electronics", credit: 3, type: "Theory" },
                    { code: "100404", name: "Discrete Mathematics", credit: 4, type: "Theory" },
                    { code: "100407", name: "Human Resource Development and Organizational Behavior", credit: 3, type: "Theory" },
                    { code: "105401", name: "Computer Organization & Architecture", credit: 3, type: "Theory" },
                    { code: "105402", name: "Design & Analysis of Algorithms", credit: 3, type: "Theory" },
                    { code: "105403", name: "Operating Systems", credit: 3, type: "Theory" },
                    { code: "100403P", name: "Digital Electronics", credit: 2, type: "Practical" },
                    { code: "105401P", name: "Computer Organization & Architecture", credit: 2, type: "Practical" },
                    { code: "105402P", "name": "Design & Analysis of Algorithms", credit: 2, type: "Practical" },
                    { code: "105403P", name: "Operating Systems", credit: 2, type: "Practical" }
                ],
                "5": [
                    { code: "100508", name: "Professional Skill Development", credit: 3, type: "Theory" },
                    { code: "105501", name: "Artificial intelligence", credit: 3, type: "Theory" },
                    { code: "105502", name: "Database Management Systems", credit: 3, type: "Theory" },
                    { code: "105503", name: "Formal Language & Automata Theory", credit: 4, type: "Theory" },
                    { code: "105504", name: "Software Engineering", credit: 3, type: "Theory" },
                    { code: "105505P", name: "Seminar", credit: 1, type: "Practical" },
                    { code: "100510", name: "Summer Entrepreneurship – II", credit: 6, type: "Special" },
                    { code: "100511", name: "MOOCs / SWAYAM / NPTEL Courses 1", credit: 2, type: "Special" },
                    { code: "105502P", name: "Database Management Systems", credit: 2, type: "Practical" }
                ]
            },
            "Civil": {
                "1": [
                    { code: "100101", name: "Engineering Chemistry", credit: 3, type: "Theory" },
                    { code: "100102", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100103", name: "Communicative English", credit: 3, type: "Theory" },
                    { code: "100104", name: "Engineering Graphics and Design", credit: 1, type: "Theory" },
                    { code: "100105", name: "Engineering Mechanics", credit: 4, type: "Theory" },
                    { code: "100109P", name: "Sports/Yoga/NCC/NSS", credit: 1, type: "Practical" },
                    { code: "100101P", name: "Engineering Chemistry Lab", credit: 1, type: "Practical" },
                    { code: "100103P", name: "Communicative English Lab", credit: 1, type: "Practical" },
                    { code: "100104P", name: "Engineering Graphics and Design Lab", credit: 2, type: "Practical" }
                ],
                "2": [
                    { code: "100201", name: "Engineering Physics", credit: 3, type: "Theory" },
                    { code: "100202", name: "Engineering Mathematics-II", credit: 4, type: "Theory" },
                    { code: "100203", name: "Programming for Problem Solving", credit: 3, type: "Theory" },
                    { code: "100214P", name: "Swachha Bharat Mission", credit: 1, type: "Practical" },
                    { code: "100210", name: "Building Material and Construction Techniques", credit: 2, type: "Theory" },
                    { code: "100211", name: "Environmental Science and Sanitation", credit: 2, type: "Theory" },
                    { code: "100212", name: "Elements of Civil Engineering", credit: 2, type: "Theory" },
                    { code: "100201P", name: "Engineering Physics Lab", credit: 1, type: "Practical" },
                    { code: "100203P", name: "Programming for Problem Solving Lab", credit: 1, type: "Practical" },
                    { code: "100210P", name: "Building Material and Construction Techniques Lab", credit: 1, type: "Practical" }
                ],
                "3": [
                    { code: "100301", name: "BIOLOGY FOR ENGINEERS", credit: 2, type: "Theory" },
                    { code: "100312", name: "MATHEMATICS-III (PDE, PROBABILITY AND STATISTICS)", credit: 2, type: "Theory" },
                    { code: "101302", name: "BASIC ELECTRONICS", credit: 1, type: "Theory" },
                    { code: "101303", name: "COMPUTER AIDED CIVIL ENGINEERING DRAWING", credit: 1, type: "Theory" },
                    { code: "101304", name: "ENGINEERING MECHANICS", credit: 4, type: "Theory" },
                    { code: "101305", name: "HUMANITIES-I(EFFECTIVE TECHNICAL COMMUNICATION)", credit: 3, type: "Theory" },
                    { code: "101306", name: "INTRODUCTION TO CIVIL ENGINEERING", credit: 2, type: "Theory" },
                    { code: "101308", name: "SURVEYING & GEOMATICS", credit: 2, type: "Theory" },
                    { code: "100399", name: "Internship", credit: 4, type: "Special" },
                    { code: "101302P", name: "BASIC ELECTRONICS", credit: 1, type: "Practical" },
                    { code: "101303P", name: "COMPUTER AIDED CIVIL ENGINEERING DRAWING", credit: 1, type: "Practical" },
                    { code: "101308P", name: "SURVEYING & GEOMATICS", credit: 1, type: "Practical" }
                ],
                "4": [
                    { code: "101401", name: "Civil Engineering - Societal & Global Impact", credit: 2, type: "Theory" },
                    { code: "101402", name: "Disaster Preparedness & Planning", credit: 2, type: "Theory" },
                    { code: "101403", name: "Engineering Geology", credit: 2, type: "Theory" },
                    { code: "101404", name: "Introduction to Fluid Mechanics", credit: 3, type: "Theory" },
                    { code: "101405", name: "Introduction to Solid Mechanics", credit: 3, type: "Theory" },
                    { code: "101406", name: "Materials, Testing & Evaluation", credit: 2, type: "Theory" },
                    { code: "101407", name: "Mechanical Engineering", credit: 3, type: "Theory" },
                    { code: "101408", name: "Structural Analysis", credit: 4, type: "Theory" },
                    { code: "100408", name: "MOOCs / SWAYAM / NPTEL Courses - 1", credit: 2, type: "Special" },
                    { code: "101403P", name: "Engineering Geology", credit: 1, type: "Practical" },
                    { code: "101404P", name: "Introduction to Fluid Mechanics", credit: 1, type: "Practical" },
                    { code: "101406P", name: "Materials, Testing & Evaluation", credit: 1, type: "Practical" }
                ],
                "5": [
                    { code: "101501", name: "Analysis and Design of Concrete Structure", credit: 3, type: "Theory" },
                    { code: "101502", name: "Environmental Engineering -I", credit: 3, type: "Theory" },
                    { code: "101503", name: "Geotechnical Engineering -I", credit: 3, type: "Theory" },
                    { code: "101504", name: "Hydraulic Engineering", credit: 2, type: "Theory" },
                    { code: "101505", name: "Hydrology & Water Resources Engineering", credit: 2, type: "Theory" },
                    { code: "101506", name: "Mechanics of Materials", credit: 3, type: "Theory" },
                    { code: "101507", name: "Transportation Engineering", credit: 3, type: "Theory" },
                    { code: "100510", name: "Summer Entrepreneurship - II", credit: 6, type: "Special" },
                    { code: "101502P", name: "Environmental Engineering -I", credit: 1, type: "Practical" },
                    { code: "101503P", name: "Geotechnical Engineering -I", credit: 1, type: "Practical" },
                    { code: "101504P", name: "Hydraulic Engineering", credit: 1, type: "Practical" },
                    { code: "101505P", name: "Hydrology & Water Resources Engineering", credit: 1, type: "Practical" },
                    { code: "101507P", name: "Transportation Engineering", credit: 1, type: "Practical" }
                ]
            },
            "Chemical": {
                "1": [
                    { code: "100101", name: "Engineering Chemistry", credit: 3, type: "Theory" },
                    { code: "100102", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100103", name: "Communicative English", credit: 3, type: "Theory" },
                    { code: "100104", name: "Engineering Graphics and Design", credit: 1, type: "Theory" },
                    { code: "100106", name: "Basic Electrical Engineering", credit: 3, type: "Theory" },
                    { code: "100109P", name: "Sports/Yoga/NCC/NSS", credit: 1, type: "Practical" },
                    { code: "100101P", name: "Engineering Chemistry Lab", credit: 1, type: "Practical" },
                    { code: "100103P", name: "Communicative English Lab", credit: 1, type: "Practical" },
                    { code: "100104P", name: "Engineering Graphics and Design Lab", credit: 2, type: "Practical" },
                    { code: "100106P", name: "Basic Electrical Engineering Lab", credit: 1, type: "Practical" }
                ],
                "2": [
                    { code: "100201", name: "Engineering Physics", credit: 3, type: "Theory" },
                    { code: "100202", name: "Engineering Mathematics-II", credit: 4, type: "Theory" },
                    { code: "100203", name: "Programming for Problem Solving", credit: 3, type: "Theory" },
                    { code: "100214P", name: "Swachha Bharat Mission", credit: 1, type: "Practical" },
                    { code: "100206", name: "Workshop Practices", credit: 2, type: "Theory" },
                    { code: "100213", name: "Introduction to Chemical Engineering", credit: 4, type: "Theory" },
                    { code: "100201P", name: "Engineering Physics Lab", credit: 1, type: "Practical" },
                    { code: "100203P", name: "Programming for Problem Solving Lab", credit: 1, type: "Practical" },
                    { code: "100206P", name: "Workshop Practices Lab", credit: 1, type: "Practical" }
                ],
                "3": [
                    { code: "114301", name: "Introduction to Chemical Engineering", credit: 3, type: "Theory" },
                    { code: "114302", name: "Process Calculation", credit: 3, type: "Theory" },
                    { code: "114303", name: "Solid Fluid Operations", credit: 3, type: "Theory" },
                    { code: "114304", name: "Physical & Organic Chemistry", credit: 3, type: "Theory" },
                    { code: "114305", name: "Python programming", credit: 3, type: "Theory" },
                    { code: "114306", name: "Maths – III", credit: 4, type: "Theory" },
                    { code: "114303P", name: "Solid Fluid Operations Lab", credit: 1.5, type: "Practical" },
                    { code: "114305P", name: "Python programming Lab", credit: 1.5, type: "Practical" }
                ],
                "4": [
                    { code: "114401", name: "Chemical Process Technology", credit: 3, type: "Theory" },
                    { code: "114402", name: "Chemical Engineering Materials", credit: 3, type: "Theory" },
                    { code: "114403", name: "Chemical Engineering Thermodynamics", credit: 3, type: "Theory" },
                    { code: "114404", name: "Industrial Fluid Flow Operations", credit: 3, type: "Theory" },
                    { code: "114405", name: "Process Equipment Design and Drawing", credit: 3, type: "Theory" },
                    { code: "114401P", name: "Chemical Process Technology Lab", credit: 2, type: "Practical" },
                    { code: "114404P", name: "Industrial Fluid Flow Operation Lab", credit: 2, type: "Practical" },
                    { code: "114405P", name: "Process Equipment Design and Drawing Lab", credit: 2, type: "Practical" }
                ]
            },
            "Electrical & Electronics": {
                "1": [
                    { code: "100101", name: "Engineering Physics", credit: 3, type: "Theory" },
                    { code: "100102", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100111", name: "Programming for Problem Solving", credit: 3, type: "Theory" },
                    { code: "100112", name: "Workshop Practices", credit: 2, type: "Theory" },
                    { code: "100106", name: "Basic Electrical Engineering", credit: 3, type: "Theory" },
                    { code: "100115P", name: "Swachha Bharat Mission (SBM)", credit: 1, type: "Practical" },
                    { code: "100101P", name: "Engineering PhysicsLab", credit: 1, type: "Practical" },
                    { code: "100112P", name: "Workshop Practices Lab", credit: 1, type: "Practical" },
                    { code: "100106P", name: "Basic Electrical Engineering Lab", credit: 1, type: "Practical" },
                    { code: "100111P", name: "Programming for Problem Solving Lab", credit: 1, type: "Practical" }
                ],
                "2": [
                    { code: "100215", name: "Engineering Chemistry", credit: 3, type: "Theory" },
                    { code: "100202", name: "Engineering Mathematics-I", credit: 4, type: "Theory" },
                    { code: "100216", name: "Communicative English", credit: 3, type: "Theory" },
                    { code: "100220P", name: "Sports/YogaNCC/NSS", credit: 1, type: "Practical" },
                    { code: "100209", name: "Basic Electronics", credit: 3, type: "Theory" },
                    { code: "100217", name: "Engineering Graphics & Design", credit: 1, type: "Theory" },
                    { code: "100215P", name: "Engineering Chemistry Lab", credit: 1, type: "Practical" },
                    { code: "100216P", name: "Communicative English Lab", credit: 1, type: "Practical" },
                    { code: "100209P", name: "Basic Electronics Lab", credit: 1, type: "Practical" },
                    { code: "100217P", name: "Engineering Graphics & Design Lab", credit: 2, type: "Practical" }
                ],
                "3": [
                    { code: "100305", name: "DIGITAL ELECTRONICS", credit: 3, type: "Theory" },
                    { code: "100306", name: "ELECTRICAL CIRCUIT ANALYSIS", credit: 4, type: "Theory" },
                    { code: "100307", name: "ELECTRICAL MACHINES - I", credit: 3, type: "Theory" },
                    { code: "100308", name: "ELECTROMAGNETIC FIELDS", credit: 4, type: "Theory" },
                    { code: "100310", name: "ENGINEERING MECHANICS", credit: 4, type: "Theory" },
                    { code: "100307P", name: "Electrical Machines Laboratory –", credit: 1, type: "Practical" },
                    { code: "100399", name: "Internship", credit: 4, type: "Special" },
                    { code: "110301", name: "MOOCs / SWAYAM / NPTEL Courses 1", credit: 2, type: "Special" }
                ],
                "4": [
                    { code: "100401", name: "Biology for Engineers", credit: 3, type: "Theory" },
                    { code: "110401", name: "Analog Electronics", credit: 3, type: "Theory" },
                    { code: "110402", name: "Electrical Machines – II", credit: 3, type: "Theory" },
                    { code: "110403", name: "Industrial Economics & Foreign Trade", credit: 2, type: "Theory" },
                    { code: "110404", "name": "Mathematics–III (Probability and Statistics)", credit: 4, type: "Theory" },
                    { code: "110405", name: "Microprocessors", credit: 3, type: "Theory" },
                    { code: "110406", name: "Signals and Systems", credit: 3, type: "Theory" },
                    { code: "110401P", name: "Analog Electronics", credit: 1, type: "Practical" },
                    { code: "110402P", name: "Electrical Machines – II", credit: 1, type: "Practical" },
                    { code: "110405P", name: "Microprocessors", credit: 1, type: "Practical" }
                ],
                "5": [
                    { code: "100502", name: "Control Systems", credit: 3, type: "Theory" },
                    { code: "100506", name: "Power Electronics", credit: 3, type: "Theory" },
                    { code: "100507", name: "Power Systems–I (Apparatus and Modelling)", credit: 3, type: "Theory" },
                    { code: "110501", name: "Analog & Digital Communication System", credit: 3, type: "Theory" },
                    { code: "100502P", name: "Control Systems", credit: 1, type: "Practical" },
                    { code: "100506P", name: "Power Electronics", credit: 1, type: "Practical" },
                    { code: "100507P", name: "Power Systems–I (Apparatus and Modelling)", credit: 1, type: "Practical" },
                    { code: "100510", name: "Summer Entrepreneurship – II", credit: 6, type: "Special" },
                    { code: "100511", name: "MOOCs / SWAYAM / NPTEL Courses 2", credit: 2, type: "Special" },
                    { code: "110501P", name: "Analog & Digital Communication System", credit: 1, type: "Practical" },
                    { code: "110504", name: "Simulation Tools for Electrical & Electronics Engineering", credit: 1, type: "Theory" }
                ]
            }
        };

        // DOM Elements
        const branchSelect = document.getElementById('branch-select');
        const semesterSelect = document.getElementById('semester-select');
        const subjectTable = document.getElementById('subject-table');
        const calculateBtn = document.getElementById('calculate-btn');
        const resultContainer = document.getElementById('result-container');
        const resultText = document.getElementById('result-text');

        // --- Helper Function to get Ordinal Numbers (1st, 2nd, 3rd) ---
        function toOrdinal(n) {
            const s = ["th", "st", "nd", "rd"];
            const v = n % 100;
            return n + (s[(v - 20) % 10] || s[v] || s[0]);
        }
        
        // Functions
        function populateBranches() {
            const branches = Object.keys(universityData);
            branches.forEach(branch => {
                const option = document.createElement('option');
                option.value = branch;
                option.textContent = branch;
                branchSelect.appendChild(option);
            });
        }

        function populateSemesters(branch) {
            semesterSelect.innerHTML = '<option value="">-- Select Semester --</option>';
            semesterSelect.disabled = true;
            if (branch && universityData[branch]) {
                const semesters = Object.keys(universityData[branch]);
                semesters.forEach(sem => {
                    const option = document.createElement('option');
                    option.value = sem;
                    // --- UPDATED to show 1st, 2nd, etc. ---
                    option.textContent = `${toOrdinal(parseInt(sem, 10))} Semester`;
                    semesterSelect.appendChild(option);
                });
                semesterSelect.disabled = false;
            }
        }

        function generateSubjectTable(branch, semester) {
            subjectTable.innerHTML = '';
            calculateBtn.classList.add('hidden');
            resultContainer.classList.add('hidden');

            if (!branch || !semester || !universityData[branch][semester]) {
                return;
            }
            
            const subjects = universityData[branch][semester];

            const thead = `
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Credit</th>
                        <th>Marks Obtained</th>
                    </tr>
                </thead>
            `;
            const tbody = document.createElement('tbody');

            subjects.forEach((subject, index) => {
                const row = document.createElement('tr');
                row.dataset.credit = subject.credit;
                row.dataset.type = subject.type;
                
                let marksInputHtml = '';
                if (subject.type === 'Theory') {
                    marksInputHtml = `
                        <input type="number" class="marks-input" placeholder="ESE (70)" min="0" max="70" data-mark-type="ese" title="End Semester Exam Marks">
                        <input type="number" class="marks-input" placeholder="IA (30)" min="0" max="30" data-mark-type="ia" title="Internal Assessment Marks">
                    `;
                } else if (subject.type === 'Practical') {
                     marksInputHtml = `
                        <input type="number" class="marks-input" placeholder="Total (50)" min="0" max="50" data-mark-type="total" title="Total Practical Marks">
                    `;
                } else if (subject.type === 'Special') {
                    marksInputHtml = `
                        <input type="number" class="marks-input" placeholder="Total (100)" min="0" max="100" data-mark-type="total" title="Total Marks">
                    `;
                }

                row.innerHTML = `
                    <td>
                        <div class="subject-name">${subject.name}</div>
                        <div class="subject-code">${subject.code}</div>
                    </td>
                    <td>${subject.credit}</td>
                    <td>${marksInputHtml}</td>
                `;
                tbody.appendChild(row);
            });
            subjectTable.innerHTML = thead;
            subjectTable.appendChild(tbody);
            calculateBtn.classList.remove('hidden');
        }

        function getGradePoint(percentage) {
            if (percentage >= 90) return 10;
            if (percentage >= 80) return 9;
            if (percentage >= 70) return 8;
            if (percentage >= 60) return 7;
            if (percentage >= 50) return 6;
            if (percentage >= 35) return 5;
            return 0;
        }

        function calculateSGPA() {
            const rows = subjectTable.querySelectorAll('tbody tr');
            let totalCredits = 0;
            let totalWeightedGradePoints = 0;
            let allInputsValid = true;

            rows.forEach(row => {
                const credit = parseFloat(row.dataset.credit);
                const type = row.dataset.type;
                let gradePoint = 0;

                totalCredits += credit;
                
                if (type === 'Theory') {
                    const eseInput = row.querySelector('[data-mark-type="ese"]');
                    const iaInput = row.querySelector('[data-mark-type="ia"]');
                    const eseMarks = parseInt(eseInput.value, 10);
                    const iaMarks = parseInt(iaInput.value, 10);

                    if (isNaN(eseMarks) || isNaN(iaMarks)) {
                        allInputsValid = false;
                        return;
                    }
                    
                    if (eseMarks < 25) { // Fail condition
                        gradePoint = 0;
                    } else {
                        const totalMarks = eseMarks + iaMarks;
                        gradePoint = getGradePoint(totalMarks); // Percentage is same as total marks out of 100
                    }
                } else if (type === 'Practical') {
                    const totalInput = row.querySelector('[data-mark-type="total"]');
                    const totalMarks = parseInt(totalInput.value, 10);

                    if (isNaN(totalMarks)) {
                        allInputsValid = false;
                        return;
                    }
                    
                    if (totalMarks < 20) { // Fail condition (40% of 50)
                        gradePoint = 0;
                    } else {
                        const percentage = (totalMarks / 50) * 100;
                        gradePoint = getGradePoint(percentage);
                    }
                } else if (subject.type === 'Special') {
                    const totalInput = row.querySelector('[data-mark-type="total"]');
                    const totalMarks = parseInt(totalInput.value, 10);

                    if (isNaN(totalMarks)) {
                        allInputsValid = false;
                        return;
                    }
                    // No specific fail condition mentioned, just grade based on percentage
                    gradePoint = getGradePoint(totalMarks);
                }

                totalWeightedGradePoints += credit * gradePoint;
            });

            if (!allInputsValid) {
                // --- UPDATED Alert Message ---
                alert('Please enter marks for all subjects.');
                return;
            }

            if (totalCredits === 0) {
                resultText.innerHTML = "Cannot calculate SGPA as Total Credits are 0.";
            } else {
                const sgpa = totalWeightedGradePoints / totalCredits;
                // --- UPDATED Result Text ---
                resultText.innerHTML = `
                    Total Credits: <strong>${totalCredits.toFixed(2)}</strong><br>
                    Your SGPA is: <p class="result-sgpa">${sgpa.toFixed(2)}</p>
                `;
            }
            resultContainer.classList.remove('hidden');
        }


        // Event Listeners
        document.addEventListener('DOMContentLoaded', populateBranches);

        branchSelect.addEventListener('change', (e) => {
            populateSemesters(e.target.value);
            // Clear table when branch changes
            generateSubjectTable(null, null);
        });
        
        semesterSelect.addEventListener('change', (e) => {
            generateSubjectTable(branchSelect.value, e.target.value);
        });

        calculateBtn.addEventListener('click', calculateSGPA);

    </script>
</body>
</html>
